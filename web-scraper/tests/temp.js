data = {
    classexercise: [
        'Enrolment Class: Class Exercise',
        '\n' +
        '            Class Nbr\n' +
        '            Section\n' +
        '            Size\n' +
        '            Available\n' +
        '            Dates\n' +
        '            Days\n' +
        '            Time\n' +
        '            Location\n' +
        '        ',
        '\n' +
        '                                14665\n' +
        '                                CE01\n' +
        '                                \n' +
        '                                    150\n' +
        '                                    \n' +
        '                                        24\n' +
        '                                    \n' +
        '                                        6 Apr -  6 Apr\n' +
        '                                        Wednesday\n' +
        '                                        5pm - 7pm\n' +
        '                                        Helen Mayo Nth, 103N, Florey Lecture Theatre\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        18 May -  18 May\n' +
        '                                        Wednesday\n' +
        '                                        5pm - 7pm\n' +
        '                                        Helen Mayo Nth, 103N, Florey Lecture Theatre\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        8 Jun -  8 Jun\n' +
        '                                        Wednesday\n' +
        '                                        5pm - 7pm\n' +
        '                                        Helen Mayo Nth, 103N, Florey Lecture Theatre\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class will be delivered both online and face to face. Please refer to MyUni for details once enrolled.\n' +
        '                                \n' +
        '                            '
    ],
    Practical: [
        'Related Class: Practical',
        '\n' +
        '            Class Nbr\n' +
        '            Section\n' +
        '            Size\n' +
        '            Available\n' +
        '            Dates\n' +
        '            Days\n' +
        '            Time\n' +
        '            Location\n' +
        '        ',
        '\n' +
        '                                14670\n' +
        '                                PR03\n' +
        '                                \n' +
        '                                    38\n' +
        '                                    \n' +
        '                                        2\n' +
        '                                    \n' +
        '                                        11 Mar -  11 Mar\n' +
        '                                        Friday\n' +
        '                                        2pm - 5pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        1 Apr -  8 Apr\n' +
        '                                        Friday\n' +
        '                                        2pm - 5pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        29 Apr -  27 May\n' +
        '                                        Friday\n' +
        '                                        2pm - 5pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class is only available for face-to-face (on-campus) students.\n' +
        '                                \n' +
        '                            ',
        '\n' +
        '                                14671\n' +
        '                                PR02\n' +
        '                                \n' +
        '                                    38\n' +
        '                                    \n' +
        '                                        3\n' +
        '                                    \n' +
        '                                        9 Mar -  9 Mar\n' +
        '                                        Wednesday\n' +
        '                                        2pm - 5pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        30 Mar -  6 Apr\n' +
        '                                        Wednesday\n' +
        '                                        2pm - 5pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        27 Apr -  25 May\n' +
        '                                        Wednesday\n' +
        '                                        2pm - 5pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class is only available for face-to-face (on-campus) students.\n' +
        '                                \n' +
        '                            ',
        '\n' +
        '                                14672\n' +
        '                                PR01\n' +
        '                                \n' +
        '                                    54\n' +
        '                                    \n' +
        '                                        4\n' +
        '                                    \n' +
        '                                        9 Mar -  9 Mar\n' +
        '                                        Wednesday\n' +
        '                                        9am - 12pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        30 Mar -  6 Apr\n' +
        '                                        Wednesday\n' +
        '                                        9am - 12pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        27 Apr -  25 May\n' +
        '                                        Wednesday\n' +
        '                                        9am - 12pm\n' +
        '                                        Engineering & Mathematics, 305318&319, Laboratory\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class is only available for face-to-face (on-campus) students.\n' +
        '                                \n' +
        '                            ',
        '\n' +
        '                                15642\n' +
        '                                PR04\n' +
        '                                \n' +
        '                                    30\n' +
        '                                    \n' +
        '                                        25\n' +
        '                                    \n' +
        '                                        8 Mar -  8 Mar\n' +
        '                                        Tuesday\n' +
        '                                        12pm - 3pm\n' +
        '                                        MyUni, OL, Online Class\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        29 Mar -  5 Apr\n' +
        '                                        Tuesday\n' +
        '                                        12pm - 3pm\n' +
        '                                        MyUni, OL, Online Class\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        26 Apr -  24 May\n' +
        '                                        Tuesday\n' +
        '                                        12pm - 3pm\n' +
        '                                        MyUni, OL, Online Class\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class is for offshore/interstate students only.  Please refer to MyUni for details once enrolled.\n' +
        '                                \n' +
        '                            '
    ],
    Workshop: [
        'Related Class: Workshop',
        '\n' +
        '            Class Nbr\n' +
        '            Section\n' +
        '            Size\n' +
        '            Available\n' +
        '            Dates\n' +
        '            Days\n' +
        '            Time\n' +
        '            Location\n' +
        '        ',
        '\n' +
        '                                19782\n' +
        '                                WR03\n' +
        '                                \n' +
        '                                    30\n' +
        '                                    \n' +
        '                                        21\n' +
        '                                    \n' +
        '                                        28 Feb -  4 Apr\n' +
        '                                        Monday\n' +
        '                                        3pm - 5pm\n' +
        '                                        MyUni, OL, Online Class\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        25 Apr -  6 Jun\n' +
        '                                        Monday\n' +
        '                                        3pm - 5pm\n' +
        '                                        MyUni, OL, Online Class\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class is for offshore/interstate students only.  Please refer to MyUni for details once enrolled.\n' +
        '                                \n' +
        '                            ',
        '\n' +
        '                                19783\n' +
        '                                WR02\n' +
        '                                \n' +
        '                                    60\n' +
        '                                    \n' +
        '                                        25\n' +
        '                                    \n' +
        '                                        4 Mar -  8 Apr\n' +
        '                                        Friday\n' +
        '                                        12pm - 2pm\n' +
        '                                        Helen Mayo Sth, SG20, Teaching Room\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        29 Apr -  10 Jun\n' +
        '                                        Friday\n' +
        '                                        12pm - 2pm\n' +
        '                                        Helen Mayo Sth, SG20, Teaching Room\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class is only available for face-to-face (on-campus) students.\n' +
        '                                \n' +
        '                            ',
        '\n' +
        '                                19784\n' +
        '                                WR01\n' +
        '                                \n' +
        '                                    90\n' +
        '                                    \n' +
        '                                        8\n' +
        '                                    \n' +
        '                                        1 Mar -  5 Apr\n' +
        '                                        Tuesday\n' +
        '                                        9am - 11am\n' +
        '                                        Engineering & Mathematics, EM205, Teaching Room\n' +
        '                                    \n' +
        '                                            ',
        '\n' +
        '                                        \n' +
        '                                        26 Apr -  31 May\n' +
        '                                        Tuesday\n' +
        '                                        9am - 11am\n' +
        '                                        Engineering & Mathematics, EM205, Teaching Room\n' +
        '                                    \n' +
        '                                    ',
        'Note: This class is only available for face-to-face (on-campus) students.\n' +
        '                                \n' +
        '                            '
    ]
};


console.log(processObject(data));

function processObject(obj) {
    let res = {};
    for (var key of Object.keys(data)) {
        data[key] = processArray(data[key]);
        len = data[key].length;
        
        if(len <= 20) {
            res[key] = formatArray(data[key]);
        }
        else {
            res[key] = formatBigArray(data[key]);
        }
    }
    return res;
};

function processArray(array) {
    let len = array.length;
    let newArray = [];
    for (lines of array) {
        temp = lines.replace(/^\s+|\s+$/gm, "").split("\n"); // trim whitespace in array;
        // temp = lines
        newArray = newArray.concat(temp);
    }
    return newArray;
}


function formatBigArray(arr) {
    var classData = []; // contains lecture objects
    try {
      for (let j = 8; j < arr.length - 13; j += 13) {
        let init = {};
        init = UpdateObj("Class Nbr", arr[j], init);
        init = UpdateObj("Section", arr[j + 1], init);
        init = UpdateObj("Size", arr[j + 2], init);
        init = UpdateObj("Available", arr[j + 3], init);
  
        for (let i = j + 4; i < j + 13 - 4; i += 4) {
          let obj = init; // console.log(`range ${i} to ${i + 4}`)
          obj = UpdateObj("Dates", arr[i], obj);
          obj = UpdateObj("Days", arr[i + 1], obj);
          obj = UpdateObj("Time", arr[i + 2], obj);
          obj = UpdateObj("Location", arr[i + 3], obj);
          classData.push(JSON.stringify(obj));
        }
      }
    //   console.log(classData);
      return classData;
    } catch (err) {
      console.log(err);
      return [];
    }
  }
  
  function formatArray(arr) {
    var classData = []; // contains lecture objects
    try {
      let init = {};
      init = UpdateObj("Class Nbr", arr[8], init);
      init = UpdateObj("Section", arr[9], init);
      init = UpdateObj("Size", arr[10], init);
      init = UpdateObj("Available", arr[11], init);
  
      for (let i = 12; i < arr.length - 4; i += 4) {
        let obj = init;
        obj = UpdateObj("Dates", arr[i], obj);
        obj = UpdateObj("Days", arr[i + 1], obj);
        obj = UpdateObj("Time", arr[i + 2], obj);
        obj = UpdateObj("Location", arr[i + 3], obj);
        classData.push(JSON.stringify(obj));
      }
      return classData;
    } catch (err) {
      console.log(err);
      return [];
    }
  }
  
  function UpdateObj(key, value, LectureObj) {
    try {
      LectureObj[key] = value;
    } catch (e) {
      console.log(`value not added to json ${e}`);
    }
    return LectureObj;
  }